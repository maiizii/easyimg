<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>简易图床 - 快速上传与管理图片</title>
    <meta name="description" content="简洁高效的图床服务，支持自定义后端 API 与密钥保护" />
    <link rel="stylesheet" href="/assets/app.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="topbar">
        <div class="topbar-inner">
          <a
            href="#"
            class="brand brand-link"
            data-view-link="upload"
            aria-label="返回上传图片页"
          >
            <img src="/logo.png" alt="简易图床 logo" class="brand-mark brand-logo" />
            <div class="brand-text">
              <h1>简易图床</h1>
              <p>快速上传、管理与分享图片</p>
            </div>
          </a>
          <nav class="topnav" aria-label="主要功能">
            <button type="button" class="nav-button active" data-view="upload">上传图片</button>
            <button type="button" class="nav-button" data-view="history">管理图片</button>
            <button type="button" class="nav-button" data-view="settings">设置</button>
          </nav>
        </div>
      </header>

      <main class="content" id="main-content">
        <section id="view-upload" class="view active" aria-labelledby="upload-title">
          <div class="panel">
            <div class="panel-header">
              <h2 id="upload-title" class="visually-hidden">上传图片</h2>
              <p class="muted">直接拖拽或点击选择文件，支持一次上传多张图片，最大 10 MB / 张</p>
              <p id="upload-warning" class="warning hidden">⚠️ 请先在设置中保存 API 地址和密钥后再上传图片</p>
            </div>
            <div class="upload-area" id="upload-dropzone" tabindex="0" role="button" aria-label="点击或拖拽上传图片">
              <p class="dropzone-title">拖拽或粘贴图片到这里，或点击选择</p>
              <p class="dropzone-hint">支持 PNG、JPG、GIF 等常见格式，也可直接从剪贴板粘贴</p>
              <button type="button" class="secondary" id="trigger-file">选择图片</button>
              <input id="imageFiles" type="file" accept="image/*" multiple hidden />
            </div>
            <div id="selected-files" class="pending-list hidden" aria-live="polite"></div>
            <div class="panel-actions">
              <button id="upload-button" type="button">开始上传</button>
              <button type="button" class="ghost" id="clear-pending">清空待传图片</button>
              <button type="button" class="ghost" id="reset-upload">重新开始上传</button>
            </div>
          </div>
          <div id="upload-results" class="results-list hidden" aria-live="polite"></div>
        </section>

        <section id="view-history" class="view" aria-labelledby="history-title">
          <div class="panel">
            <div class="panel-header with-actions">
              <div class="panel-header-main">
                <h2 id="history-title">管理图片</h2>
                <p class="muted">预览、复制链接或删除已上传的图片</p>
                <p id="history-warning" class="warning hidden">⚠️ 需要先配置 API 地址和密钥才能从服务器获取图片列表</p>
              </div>
              <div class="panel-header-actions">
                <button type="button" class="ghost" id="refresh-history">刷新图片列表</button>
              </div>
            </div>
            <div id="history-list" class="results-list" aria-live="polite"></div>
          </div>
        </section>

        <section id="view-settings" class="view" aria-labelledby="settings-title">
          <div class="panel">
            <div class="panel-header">
              <h2 id="settings-title">连接配置</h2>
              <p class="muted">填写后端服务地址与 API 密钥，保存后即可启用上传功能</p>
            </div>
            <form id="settings-form" class="form-grid">
              <label class="form-item">
                <span class="form-label">API 地址</span>
                <input id="apiUrl" type="url" placeholder="https://img.example.com" required />
                <span class="form-hint">示例：https://img.example.com</span>
              </label>
              <label class="form-item">
                <span class="form-label">API 密钥</span>
                <div class="input-with-action">
                  <input id="apiKey" type="text" placeholder="点击右侧按钮生成专属密钥" autocomplete="off" required />
                  <button type="button" class="ghost" id="generate-api-key-button">生成</button>
                </div>
                <span class="form-hint">安全提示：请妥善保管密钥，不要分享给他人</span>
              </label>
              <label class="form-item toggle-item">
                <span class="form-label">是否开启图片自动上传</span>
                <div class="toggle-control">
                  <input id="auto-upload" type="checkbox" />
                  <span class="form-hint">开启后添加图片将立即上传，无需在待上传列表中手动点击上传</span>
                </div>
              </label>
              <div class="form-actions">
                <button type="submit">保存配置</button>
              </div>
            </form>
          </div>
        </section>
      </main>

      <div id="status" class="toast" role="status" aria-live="polite"></div>

      <footer class="site-footer" role="contentinfo">
        <div class="footer-content">
          <span class="footer-copy">© 2025 EasyImg</span>
          <span class="footer-powered">
            Powered by
            <a
              href="https://github.com/maiizii/easyimg"
              target="_blank"
              rel="noopener noreferrer"
            >MaiiZii</a>
          </span>
        </div>
      </footer>
    </div>

    <script type="module" src="/assets/app.js"></script>
  </body>
</html>
